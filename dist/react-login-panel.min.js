!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("prop-types"),require("react")):"function"==typeof define&&define.amd?define("ReactLoginPanel",["prop-types","react"],n):"object"==typeof exports?exports.ReactLoginPanel=n(require("prop-types"),require("react")):e.ReactLoginPanel=n(e.PropTypes,e.React)}(window,function(e,n){return function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=9)}([function(n,t){n.exports=e},function(e,t){e.exports=n},function(e,n,t){"use strict";var i=t(8),r=t(5);e.exports=function(e,n,t,o){var a=arguments.length>2;if(e&&!Object.keys(e).length&&!a)return null;var l=i(n,o);return r(e,function(e,n,i){a?t=l(t,e,n,i):(t=e,a=!0)}),t}},function(e,n,t){"use strict";t.r(n);var i=t(1),r=t.n(i),o=t(0),a=t.n(o),l=t(2),u=t.n(l),s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},c=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();function f(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var d=function(e){return"function"==typeof e?e():e},g=function(e){function n(e){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={fieldValues:u()(e.formFields,function(e,n){var t=n.id,i=n.defaultValue;return s({},e,f({},t,i||""))},{})},t.onFieldChange=t.onFieldChange.bind(t),t.onSubmit=t.onSubmit.bind(t),t}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,r.a.Component),c(n,[{key:"onFieldChange",value:function(e,n){var t=this.state.fieldValues;this.setState({fieldValues:s({},t,f({},e,n))})}},{key:"onSubmit",value:function(e){e.preventDefault(),(0,this.props.onSubmitForm)(this.state.fieldValues)}},{key:"render",value:function(){var e=this.props,n=e.areFormTitlesVisible,t=e.lang,i=e.formFields,o=e.isLoginFormVisible,a=e.loggingIn,l=e.loginFailed,u=this.state.fieldValues,s=this.onSubmit,c=this.onFieldChange,f=["react-login-panel__form","react-login-panel__form--login",o?"react-login-panel__form--show":null,a?"react-login-panel__form--logging-in":null,l?"react-login-panel__form--login-failed":null].filter(function(e){return e}).join(" ");return r.a.createElement("div",{className:f},n&&r.a.createElement("h2",null,d(t.login)),l?d(t.loginFailedMessage):null,r.a.createElement("form",{onSubmit:s},i.map(function(e){var n=e.id,t=e.element;return r.a.createElement(r.a.Fragment,{key:n},"function"==typeof t?t({onChange:function(e){c(n,e)},value:u[n],disabled:a}):r.a.cloneElement(t,{value:u[n],onChange:function(e){c(n,e.target.value),"function"==typeof t.props.onChange&&t.props.onChange(e)},disabled:a}))}),r.a.createElement("input",{disabled:a,type:"submit",value:d(a?t.loggingIn:t.login)})))}}]),n}(),p=g;g.propTypes={areFormTitlesVisible:a.a.bool,formFields:a.a.arrayOf(a.a.shape({id:a.a.string.isRequired,element:a.a.oneOfType([a.a.object,a.a.func]).isRequired})).isRequired,isLoginFormVisible:a.a.bool.isRequired,lang:a.a.shape({loggingIn:a.a.string.isRequired,login:a.a.string.isRequired}).isRequired,loggingIn:a.a.bool.isRequired,loginFailed:a.a.bool.isRequired,onSubmitForm:a.a.func.isRequired},g.defaultProps={areFormTitlesVisible:!0};var m=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},b=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();function y(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var v=function(e){return"function"==typeof e?e():e},F=function(e){function n(e){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={validating:!1,fieldValues:u()(e.formFields,function(e,n){var t=n.id,i=n.defaultValue;return m({},e,y({},t,{value:i||""}))},{})},t.onFieldChange=t.onFieldChange.bind(t),t.validateField=t.validateField.bind(t),t.validateAllFieldsAndSubmit=t.validateAllFieldsAndSubmit.bind(t),t}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,r.a.Component),b(n,[{key:"onFieldChange",value:function(e,n,t){var i=this,r=this.state.fieldValues,o={fieldValues:m({},r,y({},e,m({},r[e],{value:n,isValid:"pending"})))};this.setState(o),this.validateField({fieldId:e,value:n,validator:t,done:function(n){i.setState(m({},o,{fieldValues:m({},o.fieldValues,y({},e,m({},o.fieldValues[e],{isValid:n})))}))}})}},{key:"validateField",value:function(e){var n,t=this,i=e.fieldId,r=e.value,o=e.validator,a=e.done,l=function(e){var n=e.fieldId;return e.validationId!==t.mostRecentValidationId[n]},u=(n=i,t.mostRecentValidationId||(t.mostRecentValidationId={}),t.mostRecentValidationId[n]?t.mostRecentValidationId[n]++:t.mostRecentValidationId[n]=1,t.mostRecentValidationId[n]),s=o(r,function(e){l({fieldId:i,validationId:u})||a(e)});s.then||l({fieldId:i,validationId:u})||a(s)}},{key:"validateAllFieldsAndSubmit",value:function(){var e=this,n=this.props,t=n.formFields,i=n.onSubmitForm,r=this.state.fieldValues,o=t.length,a=0,l=0,u={validating:!0,fieldValues:r};this.setState(u),t.forEach(function(n){var t=n.id,s=n.validator,c=r[t]&&r[t].value?r[t].value:"";e.validateField({fieldId:t,value:c,validator:s,done:function(n){u=m({},u,{fieldValues:m({},u.fieldValues,y({},t,m({},u.fieldValues[t],{isValid:n})))}),!0===n&&a++,++l===o&&(e.setState(m({},u,{validating:!1})),a===l&&i(u.fieldValues))}})})}},{key:"render",value:function(){var e=this,n=this.props,t=n.areFormTitlesVisible,i=n.lang,o=n.formFields,a=n.isSignupFormVisible,l=n.signingUp,u=this.state,s=u.validating,c=u.fieldValues,f=this.onFieldChange,d=["react-login-panel__form","react-login-panel__form--signup",a?"react-login-panel__form--show":null].filter(function(e){return e}).join(" "),g=s||l;return r.a.createElement("div",{className:d},t&&r.a.createElement("h2",null,v(i.signup)),r.a.createElement("form",{onSubmit:function(n){n.preventDefault(),e.validateAllFieldsAndSubmit()}},o.map(function(e){var n=e.id,t=e.element,i=e.validator,o=e.errorFeedbackElement,a=c[n]&&"pending"===c[n].isValid,l=!a&&void 0!==c[n].isValid&&!0!==c[n].isValid,u=l&&c[n].isValid,s=["react-login-panel__input",a?"react-login-panel__input--pending":null,l?"react-login-panel__input--error":null].filter(function(e){return e}).join(" ");return r.a.createElement(r.a.Fragment,{key:n},"function"==typeof t?t({onChange:function(e){f(n,e,i)},value:c[n].value,pendingValidation:a,disabled:g}):r.a.cloneElement(t,{className:((t.props.className?t.props.className+" ":"")+s).trim(),value:c[n].value,onChange:function(e){f(n,e.target.value,i),"function"==typeof t.props.onChange&&t.props.onChange(e)},disabled:g}),l?o(u):null)}),r.a.createElement("input",{disabled:g,type:"submit",value:v(i.signup)})))}}]),n}(),h=F;F.propTypes={areFormTitlesVisible:a.a.bool,formFields:a.a.arrayOf(a.a.shape({id:a.a.string.isRequired,element:a.a.oneOfType([a.a.object,a.a.func]).isRequired,validator:a.a.func.isRequired,errorFeedbackElement:a.a.func.isRequired})).isRequired,isSignupFormVisible:a.a.bool.isRequired,lang:a.a.shape({signup:a.a.string.isRequired}).isRequired,onSubmitForm:a.a.func.isRequired,signingUp:a.a.bool.isRequired},F.defaultProps={areFormTitlesVisible:!0};var j=function(e){return"function"==typeof e?e():e},V=function(e){var n=e.isLoginFormVisible,t=e.isSignupFormVisible,i=e.areFormTitlesVisible,o=e.loggedInUser,a=e.userLoggedInMessage,l=e.signout,u=e.toggleLoginForm,s=e.loginFormFields,c=e.onSubmitLoginForm,f=e.loggingIn,d=e.loginFailed,g=e.toggleSignupForm,m=e.signupFormFields,b=e.signingUp,y=e.onSubmitSignupForm,v=e.lang;return r.a.createElement("div",{className:"react-login-panel"},s&&m&&r.a.createElement("div",{className:"react-login-panel__nav"},o?"function"==typeof a?a(o):r.a.createElement(r.a.Fragment,null,a,r.a.createElement("div",{className:"react-login-panel__button",onClick:l},j(v.signout))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"react-login-panel__button"+(n?" active":""),onClick:u},j(v.login)),r.a.createElement("div",{className:"react-login-panel__button"+(t?" active":""),onClick:g},j(v.signup)))),r.a.createElement("div",{className:"react-login-panel__forms"},s&&r.a.createElement(p,{areFormTitlesVisible:i,formFields:s,isLoginFormVisible:n&&!o,lang:v,loggingIn:f,loginFailed:d,onSubmitForm:c}),m&&r.a.createElement(h,{areFormTitlesVisible:i,formFields:m,isSignupFormVisible:t&&!o,lang:v,onSubmitForm:y,signingUp:b})))};V.propTypes={areFormTitlesVisible:a.a.bool,isLoginFormVisible:a.a.bool.isRequired,isSignupFormVisible:a.a.bool.isRequired,lang:a.a.shape({login:a.a.oneOfType([a.a.func,a.a.node]),signup:a.a.oneOfType([a.a.func,a.a.node]),signout:a.a.oneOfType([a.a.func,a.a.node]),loggingIn:a.a.oneOfType([a.a.func,a.a.node]),loginFailedMessage:a.a.oneOfType([a.a.func,a.a.node])}),loggedInUser:a.a.object,loggingIn:a.a.bool,loginFailed:a.a.bool,loginFormFields:a.a.arrayOf(a.a.shape({id:a.a.string.isRequired,element:a.a.oneOfType([a.a.object,a.a.func]).isRequired})),onSubmitLoginForm:a.a.func,onSubmitSignupForm:a.a.func,signingUp:a.a.bool,signout:a.a.func,signupFormFields:a.a.arrayOf(a.a.shape({id:a.a.string.isRequired,element:a.a.oneOfType([a.a.object,a.a.func]).isRequired,validator:a.a.func.isRequired,errorFeedbackElement:a.a.func.isRequired})),toggleLoginForm:a.a.func,toggleSignupForm:a.a.func,userLoggedInMessage:a.a.oneOfType([a.a.func,a.a.node])},V.defaultProps={areFormTitlesVisible:!0,lang:{login:"Login",signup:"Signup",signout:"Sign Out",loggingIn:"Logging In",loginFailedMessage:"Login failed"},loggedInUser:null,loggingIn:null,loginFailed:null,loginFormFields:null,onSubmitLoginForm:null,onSubmitSignupForm:null,signingUp:null,signout:null,signupFormFields:null,toggleLoginForm:null,toggleSignupForm:null,userLoggedInMessage:null},n.default=V},function(e,n,t){"use strict";e.exports=function(e,n,t){for(var i in e)if(!1===n.call(t,e[i],i,e))break}},function(e,n,t){"use strict";var i=t(4),r=Object.prototype.hasOwnProperty;e.exports=function(e,n,t){i(e,function(i,o){if(r.call(e,o))return n.call(t,e[o],o,e)})}},function(e,n){function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,n,t){var i=t(6),r=Object.prototype.toString;e.exports=function(e){if(void 0===e)return"undefined";if(null===e)return"null";if(!0===e||!1===e||e instanceof Boolean)return"boolean";if("string"==typeof e||e instanceof String)return"string";if("number"==typeof e||e instanceof Number)return"number";if("function"==typeof e||e instanceof Function)return"function";if(void 0!==Array.isArray&&Array.isArray(e))return"array";if(e instanceof RegExp)return"regexp";if(e instanceof Date)return"date";var n=r.call(e);return"[object RegExp]"===n?"regexp":"[object Date]"===n?"date":"[object Arguments]"===n?"arguments":"[object Error]"===n?"error":i(e)?"buffer":"[object Set]"===n?"set":"[object WeakSet]"===n?"weakset":"[object Map]"===n?"map":"[object WeakMap]"===n?"weakmap":"[object Symbol]"===n?"symbol":"[object Int8Array]"===n?"int8array":"[object Uint8Array]"===n?"uint8array":"[object Uint8ClampedArray]"===n?"uint8clampedarray":"[object Int16Array]"===n?"int16array":"[object Uint16Array]"===n?"uint16array":"[object Int32Array]"===n?"int32array":"[object Uint32Array]"===n?"uint32array":"[object Float32Array]"===n?"float32array":"[object Float64Array]"===n?"float64array":"object"}},function(e,n,t){"use strict";var i=t(7);function r(e,n){for(var t=e.length,i=-1;++i<t;)if(o(e[i],n))return!0;return!1}function o(e,n){return"object"===i(e)?Array.isArray(e)&&Array.isArray(n)?function(e,n){for(var t=n.length,i=-1;++i<t;)if(!r(e,n[i]))return!1;return!0}(e,n):function(e,n){for(var t in n)if(n.hasOwnProperty(t)&&!1===o(e[t],n[t]))return!1;return!0}(e,n):e===n}function a(e){return e}e.exports=function(e,n){switch(i(e)){case"undefined":case"null":return a;case"function":return void 0!==n?function(t,i,r){return e.call(n,t,i,r)}:e;case"object":return function(n){return o(n,e)};case"regexp":return function(n){return e.test(n)};case"string":case"number":default:return t=e,function(e){return e[t]}}var t}},function(e,n,t){t(16),t(11),e.exports=t(3)},,function(e,n){},,,,,function(e,n){}])});