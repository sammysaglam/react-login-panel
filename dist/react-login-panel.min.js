!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("prop-types"),require("react")):"function"==typeof define&&define.amd?define("ReactLoginPanel",["prop-types","react"],n):"object"==typeof exports?exports.ReactLoginPanel=n(require("prop-types"),require("react")):e.ReactLoginPanel=n(e.PropTypes,e.React)}(window,function(e,n){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=8)}([function(n,t){n.exports=e},function(e,t){e.exports=n},function(e,n,t){"use strict";var r=t(7),i=t(5);e.exports=function(e,n,t,a){var o=arguments.length>2;if(e&&!Object.keys(e).length&&!o)return null;var l=r(n,a);return i(e,function(e,n,r){o?t=l(t,e,n,r):(t=e,o=!0)}),t}},function(e,n,t){"use strict";t.r(n);var r=t(1),i=t.n(r),a=t(0),o=t.n(a),l=t(2),u=t.n(l),s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},c=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();function f(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var d=function(e){return"function"==typeof e?e():e},g=function(e){function n(e){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={fieldValues:u()(e.formFields,function(e,n){var t=n.id,r=n.defaultValue;return s({},e,f({},t,r||""))},{})},t.onFieldChange=t.onFieldChange.bind(t),t.onSubmit=t.onSubmit.bind(t),t}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,i.a.Component),c(n,[{key:"onFieldChange",value:function(e,n){var t=this.state.fieldValues;this.setState({fieldValues:s({},t,f({},e,n))})}},{key:"onSubmit",value:function(e){e.preventDefault(),(0,this.props.onSubmitForm)(this.state.fieldValues)}},{key:"render",value:function(){var e=this.props,n=e.areFormTitlesVisible,t=e.lang,r=e.formFields,a=e.isLoginFormVisible,o=e.loggingIn,l=e.loginFailed,u=this.state.fieldValues,s=this.onSubmit,c=this.onFieldChange,f=["react-login-panel__form","react-login-panel__form--login",a?"react-login-panel__form--show":null,o?"react-login-panel__form--logging-in":null,l?"react-login-panel__form--login-failed":null].filter(function(e){return e}).join(" ");return i.a.createElement("div",{className:f},n&&i.a.createElement("h2",null,d(t.login)),l?d(t.loginFailedMessage):null,i.a.createElement("form",{onSubmit:s},r.map(function(e){var n=e.id,t=e.element;return i.a.createElement(i.a.Fragment,{key:n},"function"==typeof t?t({onChange:function(e){c(n,e)},value:u[n],disabled:o}):i.a.cloneElement(t,{value:u[n],onChange:function(e){c(n,e.target.value),"function"==typeof t.props.onChange&&t.props.onChange(e)},disabled:o}))}),i.a.createElement("input",{disabled:o,type:"submit",value:d(o?t.loggingIn:t.login)})))}}]),n}(),p=g;g.propTypes={areFormTitlesVisible:o.a.bool,formFields:o.a.arrayOf(o.a.shape({id:o.a.string.isRequired,element:o.a.oneOfType([o.a.object,o.a.func]).isRequired})).isRequired,isLoginFormVisible:o.a.bool.isRequired,lang:o.a.shape({loggingIn:o.a.string.isRequired,login:o.a.string.isRequired}).isRequired,loggingIn:o.a.bool.isRequired,loginFailed:o.a.bool.isRequired,onSubmitForm:o.a.func.isRequired},g.defaultProps={areFormTitlesVisible:!0};var m=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},b=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();function y(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var v=function(e){return"function"==typeof e?e():e},F=function(e){function n(e){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={validating:!1,fieldValues:u()(e.formFields,function(e,n){var t=n.id,r=n.defaultValue;return m({},e,y({},t,{value:r||""}))},{})},t.onFieldChange=t.onFieldChange.bind(t),t.validateField=t.validateField.bind(t),t.validateAllFieldsAndSubmit=t.validateAllFieldsAndSubmit.bind(t),t}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,i.a.Component),b(n,[{key:"onFieldChange",value:function(e,n,t){var r=this,i=this.state.fieldValues,a={fieldValues:m({},i,y({},e,m({},i[e],{value:n,isValid:"pending"})))};this.setState(a),this.validateField({fieldId:e,value:n,validator:t,done:function(n){r.setState(m({},a,{fieldValues:m({},a.fieldValues,y({},e,m({},a.fieldValues[e],{isValid:n})))}))}})}},{key:"validateField",value:function(e){var n,t=this,r=e.fieldId,i=e.value,a=e.validator,o=e.done,l=function(e){var n=e.fieldId;return e.validationId!==t.mostRecentValidationId[n]},u=(n=r,t.mostRecentValidationId||(t.mostRecentValidationId={}),t.mostRecentValidationId[n]?t.mostRecentValidationId[n]++:t.mostRecentValidationId[n]=1,t.mostRecentValidationId[n]),s=a(i,function(e){l({fieldId:r,validationId:u})||o(e)});s.then||l({fieldId:r,validationId:u})||o(s)}},{key:"validateAllFieldsAndSubmit",value:function(){var e=this,n=this.props,t=n.formFields,r=n.onSubmitForm,i=this.state.fieldValues,a=t.length,o=0,l=0,u={validating:!0,fieldValues:i};this.setState(u),t.forEach(function(n){var t=n.id,s=n.validator,c=i[t]&&i[t].value?i[t].value:"";e.validateField({fieldId:t,value:c,validator:s,done:function(n){u=m({},u,{fieldValues:m({},u.fieldValues,y({},t,m({},u.fieldValues[t],{isValid:n})))}),!0===n&&o++,++l===a&&(e.setState(m({},u,{validating:!1})),o===l&&r(u.fieldValues))}})})}},{key:"render",value:function(){var e=this,n=this.props,t=n.areFormTitlesVisible,r=n.lang,a=n.formFields,o=n.isSignupFormVisible,l=n.signingUp,u=this.state,s=u.validating,c=u.fieldValues,f=this.onFieldChange,d=["react-login-panel__form","react-login-panel__form--signup",o?"react-login-panel__form--show":null].filter(function(e){return e}).join(" "),g=s||l;return i.a.createElement("div",{className:d},t&&i.a.createElement("h2",null,v(r.signup)),i.a.createElement("form",{onSubmit:function(n){n.preventDefault(),e.validateAllFieldsAndSubmit()}},a.map(function(e){var n=e.id,t=e.element,r=e.validator,a=e.errorFeedbackElement,o=c[n]&&"pending"===c[n].isValid,l=!o&&void 0!==c[n].isValid&&!0!==c[n].isValid,u=l&&c[n].isValid,s=["react-login-panel__input",o?"react-login-panel__input--pending":null,l?"react-login-panel__input--error":null].filter(function(e){return e}).join(" ");return i.a.createElement(i.a.Fragment,{key:n},"function"==typeof t?t({onChange:function(e){f(n,e,r)},value:c[n].value,pendingValidation:o,disabled:g}):i.a.cloneElement(t,{className:((t.props.className?t.props.className+" ":"")+s).trim(),value:c[n].value,onChange:function(e){f(n,e.target.value,r),"function"==typeof t.props.onChange&&t.props.onChange(e)},disabled:g}),l?a(u):null)}),i.a.createElement("input",{disabled:g,type:"submit",value:v(r.signup)})))}}]),n}(),h=F;F.propTypes={areFormTitlesVisible:o.a.bool,formFields:o.a.arrayOf(o.a.shape({id:o.a.string.isRequired,element:o.a.oneOfType([o.a.object,o.a.func]).isRequired,validator:o.a.func.isRequired,errorFeedbackElement:o.a.func.isRequired})).isRequired,isSignupFormVisible:o.a.bool.isRequired,lang:o.a.shape({signup:o.a.string.isRequired}).isRequired,onSubmitForm:o.a.func.isRequired,signingUp:o.a.bool.isRequired},F.defaultProps={areFormTitlesVisible:!0};var V=function(e){return"function"==typeof e?e():e},_=function(e){var n=e.isLoginFormVisible,t=e.isSignupFormVisible,r=e.areFormTitlesVisible,a=e.loggedInUser,o=e.userLoggedInMessage,l=e.signout,u=e.toggleLoginForm,s=e.loginFormFields,c=e.onSubmitLoginForm,f=e.loggingIn,d=e.loginFailed,g=e.toggleSignupForm,m=e.signupFormFields,b=e.signingUp,y=e.onSubmitSignupForm,v=e.lang;return i.a.createElement("div",{className:"react-login-panel"},s&&m&&i.a.createElement("div",{className:"react-login-panel__nav"},a?"function"==typeof o?o(a):i.a.createElement(i.a.Fragment,null,o,i.a.createElement("div",{className:"react-login-panel__button",onClick:l},V(v.signout))):i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"react-login-panel__button"+(n?" active":""),onClick:u},V(v.login)),i.a.createElement("div",{className:"react-login-panel__button"+(t?" active":""),onClick:g},V(v.signup)))),i.a.createElement("div",{className:"react-login-panel__forms"},s&&i.a.createElement(p,{areFormTitlesVisible:r,formFields:s,isLoginFormVisible:n&&!a,lang:v,loggingIn:f,loginFailed:d,onSubmitForm:c}),m&&i.a.createElement(h,{areFormTitlesVisible:r,formFields:m,isSignupFormVisible:t&&!a,lang:v,onSubmitForm:y,signingUp:b})))};_.propTypes={areFormTitlesVisible:o.a.bool,isLoginFormVisible:o.a.bool.isRequired,isSignupFormVisible:o.a.bool.isRequired,lang:o.a.shape({login:o.a.oneOfType([o.a.func,o.a.node]),signup:o.a.oneOfType([o.a.func,o.a.node]),signout:o.a.oneOfType([o.a.func,o.a.node]),loggingIn:o.a.oneOfType([o.a.func,o.a.node]),loginFailedMessage:o.a.oneOfType([o.a.func,o.a.node])}),loggedInUser:o.a.object,loggingIn:o.a.bool,loginFailed:o.a.bool,loginFormFields:o.a.arrayOf(o.a.shape({id:o.a.string.isRequired,element:o.a.oneOfType([o.a.object,o.a.func]).isRequired})),onSubmitLoginForm:o.a.func,onSubmitSignupForm:o.a.func,signingUp:o.a.bool,signout:o.a.func,signupFormFields:o.a.arrayOf(o.a.shape({id:o.a.string.isRequired,element:o.a.oneOfType([o.a.object,o.a.func]).isRequired,validator:o.a.func.isRequired,errorFeedbackElement:o.a.func.isRequired})),toggleLoginForm:o.a.func,toggleSignupForm:o.a.func,userLoggedInMessage:o.a.oneOfType([o.a.func,o.a.node])},_.defaultProps={areFormTitlesVisible:!0,lang:{login:"Login",signup:"Signup",signout:"Sign Out",loggingIn:"Logging In",loginFailedMessage:"Login failed"},loggedInUser:null,loggingIn:null,loginFailed:null,loginFormFields:null,onSubmitLoginForm:null,onSubmitSignupForm:null,signingUp:null,signout:null,signupFormFields:null,toggleLoginForm:null,toggleSignupForm:null,userLoggedInMessage:null},n.default=_},function(e,n,t){"use strict";e.exports=function(e,n,t){for(var r in e)if(!1===n.call(t,e[r],r,e))break}},function(e,n,t){"use strict";var r=t(4),i=Object.prototype.hasOwnProperty;e.exports=function(e,n,t){r(e,function(r,a){if(i.call(e,a))return n.call(t,e[a],a,e)})}},function(e,n){var t=Object.prototype.toString;function r(e){return e.constructor?e.constructor.name:null}e.exports=function(e){if(void 0===e)return"undefined";if(null===e)return"null";var n=typeof e;if("boolean"===n)return"boolean";if("string"===n)return"string";if("number"===n)return"number";if("symbol"===n)return"symbol";if("function"===n)return"GeneratorFunction"===r(e)?"generatorfunction":"function";if(function(e){return Array.isArray?Array.isArray(e):e instanceof Array}(e))return"array";if(function(e){return!(!e.constructor||"function"!=typeof e.constructor.isBuffer)&&e.constructor.isBuffer(e)}(e))return"buffer";if(function(e){try{if("number"==typeof e.length&&"function"==typeof e.callee)return!0}catch(e){if(-1!==e.message.indexOf("callee"))return!0}return!1}(e))return"arguments";if(function(e){return e instanceof Date||"function"==typeof e.toDateString&&"function"==typeof e.getDate&&"function"==typeof e.setDate}(e))return"date";if(function(e){return e instanceof Error||"string"==typeof e.message&&e.constructor&&"number"==typeof e.constructor.stackTraceLimit}(e))return"error";if(function(e){return e instanceof RegExp||"string"==typeof e.flags&&"boolean"==typeof e.ignoreCase&&"boolean"==typeof e.multiline&&"boolean"==typeof e.global}(e))return"regexp";switch(r(e)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(function(e){return"function"==typeof e.throw&&"function"==typeof e.return&&"function"==typeof e.next}(e))return"generator";switch(n=t.call(e)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return n.slice(8,-1).toLowerCase().replace(/\s/g,"")}},function(e,n,t){"use strict";var r=t(6);function i(e,n){for(var t=e.length,r=-1;++r<t;)if(a(e[r],n))return!0;return!1}function a(e,n){return"object"===r(e)?Array.isArray(e)&&Array.isArray(n)?function(e,n){for(var t=n.length,r=-1;++r<t;)if(!i(e,n[r]))return!1;return!0}(e,n):function(e,n){for(var t in n)if(n.hasOwnProperty(t)&&!1===a(e[t],n[t]))return!1;return!0}(e,n):e===n}function o(e){return e}e.exports=function(e,n){switch(r(e)){case"undefined":case"null":return o;case"function":return void 0!==n?function(t,r,i){return e.call(n,t,r,i)}:e;case"object":return function(n){return a(n,e)};case"regexp":return function(n){return e.test(n)};case"string":case"number":default:return t=e,function(e){return e[t]}}var t}},function(e,n,t){t(15),t(10),e.exports=t(3)},,function(e,n){},,,,,function(e,n){}])});